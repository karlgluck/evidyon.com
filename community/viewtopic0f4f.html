<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">

<!-- Mirrored from unseenstudios.com/community/viewtopic.php?f=32&t=1218&sid=65573d350e171b908b90f1864d554f9e&start=25 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 11 Oct 2015 22:54:31 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<title>Unseen Studios &bull; View topic - A small problem...and an upcoming update :D</title>

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '2';
	var per_page = '25';
	var base_url = 'viewtopic7ca6.html';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.unseenstudios.com';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	
	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="styles/prosilver/template/forum_fn.js"></script>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />


</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="index.html" title="Board index" id="logo"><img src="styles/prosilver/imageset/site_logo.gif" width="139" height="52" alt="" title="" /></a>
				<h1>Unseen Studios</h1>
				<p>Game Development and More</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

		
			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="viewforum4b7d.html">Archive</a> <strong>&#8249;</strong> <a href="viewforumcd74.html">Archive (Before Alpha 2)</a></li>

				<li class="rightside"><a href="#" onclick="fontsizeup(); return false;" onkeypress="fontsizeup(); return false;" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="viewtopica8ca.html" title="Print view" accesskey="p" class="print">Print view</a></li>			</ul>

			
			<ul class="linklist rightside">
				<li class="icon-faq"><a href="faq.html" title="Frequently Asked Questions">FAQ</a></li>
				<li class="icon-members"><a title="View complete list of members">Members</a></li>					<li class="icon-logout"><a title="Login" accesskey="l">Login</a></li>
							</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>

	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
		 <h2><a href="viewtopic0f4f.html">A small problem...and an upcoming update :D</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><span style="display: none">Old stuff, just for reference<br /></span>	<p>
					<strong>Moderator:</strong> <a href="memberlistdd5b.html">Joe M.</a>		
	</p>

<div class="topic-actions">

	<div class="buttons">
			<div class="reply-icon"><a href="posting.html" title="Post a reply"><span></span>Post a reply</a></div>
		</div>

			<div class="pagination">
			30 posts			 &bull; <a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>2</strong> of <strong>2</strong></a> &bull; <span><a href="viewtopic7ca6.html">1</a><span class="page-sep">, </span><strong>2</strong></span>		</div>
	
</div>
<div class="clear"></div>

	<div id="p7858" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 class="first"><a href="#p7858">Re: A small problem...and an upcoming update :D</a></h3>
			<p class="author"><a href="viewtopic98b7.html#p7858"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="memberlista485.html">ubern00ber</a></strong> &raquo; Tue Dec 02, 2008 11:15 pm </p>

			
			<div class="content">Of course I remember it. I discovered it(for the most part, Andy did some awesome discovering, too).<br /><br />(Long wall of text ahead. beware)<br /><br />EJ's packet system worked in the following way. Every Actor that was in the game had a certain ID on the server. This includes every player, merchant, enemy, etc etc, all sharing the same pool of ID's. EJ would first send a packet to the client with all the information about your character(that is, as soon as you log on), which would hold everything about your character. Your ID, your rotation, your model, your weapon, your shield/helmet, etc etc etc. This packet would only be sent once, and the client would remember the ID of your player and always draw your player according to the model, etc, received from the packet. <br /><br />The update packets would never again send what your character looks like again unless there is a change to it. The update packet would always send your X/Y position on the map, your buffs, your hp/mp(bar), the time of day, your animation, any spell effects on you, etc.. This was all done in 25 bytes(not including overhead) and was a tad bit wasteful, as most of these things did not have to be sent in every single packet, but that's ok. The good part of EJ's packet system came next. In those 25 bytes, it would also state the number of actors on the screen(not including you), and would then begin sending data about actors after the 25th byte. If it was the first time you've ever seen this specific actor(or, to avoid having to remember all that on the server, if this specific actor just walked on to your screen) the server would tell the client that actors ID number, and all the information needed about him, including model, animation, spell effect, x/y position, helmet/shield/weapon, eggs, etc. and the client would remember all of this under the specific ID number of the actor. In any update packet from this point on, the server would only need to tell the client that that specific actor is on screen(via ID number), and any information that has changed about that actor. This meant that each actor on the screen, when they would idle, move, attack, etc etc, would only take up 4 extra bytes in the update packet, provided that this isn't the first time that the client see's them. <br /><br />So basically if ID 1, 2, and 3 are all on your screen(you are ID 0, lets say), the server would tell you in every update packet that ID's 1, 2, and 3 are on your screen. If ID 2 moved around, the packet would also tell you that ID 2 is on your screen and what their new X/Y position is. The client knew how many bytes in the packet were for each actor along with what each byte did because of a flag that was sent in after the ID. Based on this flag, information such as that ID's new X/Y position, that ID's animation, that ID's could be sent in minimal space and the client would know exactly what to do with it. I can explain it in further detail(showing exactly what the packet itself looked like) if you want.<br /><br />EDIT: I forgot to say also that when ID 1, 2, and 3 each came onto your screen, the server also told you(the client) what they looked like, etc.. Only once, though.<br /><br /><br />Anyway I think i know how you can smooth movement out very well. From what you just said above, I gather that you don't necessarily update the client's characters X/Y position every packet, but instead only when they move, and you allow the client and the server to do movement calculations simultaneously, and perhaps sync it every few packets(or seconds). EJ does not have any movement calculations on the client side. He does not say to the client &quot;move to this x/y at this speed&quot; and allow the client to do that on it's own. He instead updates the x/y position of the clients character every maybe 100ms and has the client just smooth it out. So lets say for example the clients character is to move from 0,0 to 5,0, and the movement would take 1 second. Assuming EJ sends update packets every 200ms, it would look like this<br /><br />C-----X-----X-----X-----X-----X<br /><br />C is where the character is, X is the points where the server will tell the client where the character is every update packet. The client is in charge of smoothly moving the character from point C to the first X after the update is received(if it's every 200ms, the time it takes to get from C to X is pretty much negligable, as it sends about 10 packets for one movement.) and the server is in charge of calculating where the next point is and when he reaches that point. The server sends the next X to the client, and the client moves the character to that next point(this happens too fast to be even noticed, I mean, if theres 10 packets every second, which is what my XPS was set to, the intervals inbetween those X's were too small and xenimus made the movements smooth so that it was unnoticable). The exact same concept was used for when any other Actor was moving on the screen, and resulted in very very nice and smooth movement.<br /><br /><br />I have no clue how much any of that made sense, but lemme know what you think or if you wanna know anything more.</div>

			
		</div>

					<dl class="postprofile" id="profile7858">
			<dt>
				<a href="memberlista485.html"><img src="../../homestarrunner.com/hsicons/ppbounce.gif" width="48" height="48" alt="User avatar" /></a><br />
				<a href="memberlista485.html">ubern00ber</a>			</dt>

			<dd>Traveler<br /><img src="images/ranks/rank_1.gif" alt="Traveler" title="Traveler" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 97</dd><dd><strong>Joined:</strong> Sat Dec 23, 2006 10:28 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p7859" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p7859">Re: A small problem...and an upcoming update :D</a></h3>
			<p class="author"><a href="viewtopic89ea-2.html#p7859"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="memberlista485.html">ubern00ber</a></strong> &raquo; Tue Dec 02, 2008 11:39 pm </p>

			
			<div class="content"><blockquote><div><cite>Karl G. wrote:</cite><blockquote><div><cite>ubern00ber wrote:</cite>Anyway this is what you missed as far as stats go:<br /><img src="../../i437.photobucket.com/albums/qq92/Acabol/statspage1a86.jpg" alt="Image" /><br /><br />20 + 16 + 19 + 16 + 19 = 90 = 15 points more then I should be allowed to have...<br /><br />You basically did checks to make sure that every stat is within its range(10-20 for strength, for example) but did not check to make sure that the total number of stat points is 75.</div></blockquote><br /><br />Fixed!  I actually had the check for this commented out.  Thanks <img src="images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div></blockquote><br /><br />Can i keep my character, though? <img src="images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>

			
		</div>

					<dl class="postprofile" id="profile7859">
			<dt>
				<a href="memberlista485.html"><img src="../../homestarrunner.com/hsicons/ppbounce.gif" width="48" height="48" alt="User avatar" /></a><br />
				<a href="memberlista485.html">ubern00ber</a>			</dt>

			<dd>Traveler<br /><img src="images/ranks/rank_1.gif" alt="Traveler" title="Traveler" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 97</dd><dd><strong>Joined:</strong> Sat Dec 23, 2006 10:28 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p7860" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p7860">Re: A small problem...and an upcoming update :D</a></h3>
			<p class="author"><a href="viewtopic8b6e.html#p7860"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="memberlista485.html">ubern00ber</a></strong> &raquo; Wed Dec 03, 2008 12:00 am </p>

			
			<div class="content">Last thing to say for the night:<br /><br />After playing Evidyon for a bit, I've determined that (sorry to say..) your packet system needs a major re-write. Everything seems to move a little too... hacky... I don't know how to explain it, but I am willing to do whatever I can to help. I can even give you server code from my Xenimus server if you want to see how I did it and how Xenimus generally does movement (the only part that's missing is the client side stuff which is really just smoothing the movement). I can come up with packet structures and general ways of sending data based on my Xenimus knowledge(lolll) if you want. They may be very useful. Lets face it, though, EJ does have a pretty solid and completely lag-free game.</div>

			
		</div>

					<dl class="postprofile" id="profile7860">
			<dt>
				<a href="memberlista485.html"><img src="../../homestarrunner.com/hsicons/ppbounce.gif" width="48" height="48" alt="User avatar" /></a><br />
				<a href="memberlista485.html">ubern00ber</a>			</dt>

			<dd>Traveler<br /><img src="images/ranks/rank_1.gif" alt="Traveler" title="Traveler" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 97</dd><dd><strong>Joined:</strong> Sat Dec 23, 2006 10:28 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p7861" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p7861">Re: A small problem...and an upcoming update :D</a></h3>
			<p class="author"><a href="viewtopica564.html#p7861"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="memberlist5e17.html">Karl G.</a></strong> &raquo; Wed Dec 03, 2008 9:35 am </p>

			
			<div class="content"><blockquote><div><cite>ubern00ber wrote:</cite>Last thing to say for the night:<br /><br />After playing Evidyon for a bit, I've determined that (sorry to say..) your packet system needs a major re-write. Everything seems to move a little too... hacky... I don't know how to explain it, but I am willing to do whatever I can to help. I can even give you server code from my Xenimus server if you want to see how I did it and how Xenimus generally does movement (the only part that's missing is the client side stuff which is really just smoothing the movement). I can come up with packet structures and general ways of sending data based on my Xenimus knowledge(lolll) if you want. They may be very useful. Lets face it, though, EJ does have a pretty solid and completely lag-free game.</div></blockquote><br /><br />Thank you for your detailed description--I would love to take a look at the packet system code!  I am currently using <a href="http://enet.bespin.org/" class="postlink">ENet</a> for my network layer because, although I have written several in the past, they didn't have a packet throttling method and weren't quite as flexible (although one had a particularly cool rotating encryption technique where the encryption code changes once per second).<br /><br />Interestingly, the system for displaying characters is almost exactly as you describe.  The full actor description is only defined once, and only at the client's request; i.e. the server just sends position- update packets, then when a client realizes &quot;hey I have no idea what that actor looks like&quot; then it sends a request to the server for that description.  At times when the server can be sure that clients in a given area of the world have never seen an actor before (client logging into the world or coming in from beyond a certain distance) it just sends all relevant descriptions outright.<br /><br />One thing that majorly differs, however, is how I handle movement.  Currently, update packets are directive.  I send an actor's location, direction and speed when either the direction or speed change.  When possible, I send predictive packets according to the client's delay time (for example, when an actor is about to stop moving).  The client also predicts its own motion change according to the server lag to help smooth things out.<br /><br /><br />I originally shied away from a motion system like you describe because I felt that something that sends packets so frequently would result in a lot of bandwidth use; however, it seems that my system is becoming almost as complex and bandwidth-heavy.  I have started taking a second look at the movement system for this next update, and I'd like to try implementing the motion system you described.  I'll let you know if I have any questions--it sounds pretty straightforward to implement, though <img src="images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

			
		</div>

					<dl class="postprofile" id="profile7861">
			<dt>
				<a href="memberlist5e17.html"><img src="images/avatars/gallery/black_white_1/yingyang_avat.gif" width="87" height="88" alt="User avatar" /></a><br />
				<a href="memberlist5e17.html">Karl G.</a>			</dt>

			<dd>Lesser Spirit</dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2453</dd><dd><strong>Joined:</strong> Sat Mar 04, 2006 10:26 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p7862" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p7862">Re: A small problem...and an upcoming update :D</a></h3>
			<p class="author"><a href="viewtopicd51c.html#p7862"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a href="memberlista485.html">ubern00ber</a></strong> &raquo; Wed Dec 03, 2008 10:04 am </p>

			
			<div class="content">The movement system I described probably will take up more bandwidth, but it's probably worth it if it smooths out the movement loots. After incorporating this, you won't really have any jumping around. I mean, the main problem I had with your client the way it currently works was that the client had its own assumption of where the character was, which was not necessarily right. After you'd do something that would update where you are(if i remember right, casting a spell or attacking probably both do, or even just starting a new movement) there'd be a big jump. The only other thing I wish to test right now(well, soon) is how much bandwidth a big group of enemies takes up. I'll do it on my own, though. Jus needa start leveling up first hehe.</div>

			
		</div>

					<dl class="postprofile" id="profile7862">
			<dt>
				<a href="memberlista485.html"><img src="../../homestarrunner.com/hsicons/ppbounce.gif" width="48" height="48" alt="User avatar" /></a><br />
				<a href="memberlista485.html">ubern00ber</a>			</dt>

			<dd>Traveler<br /><img src="images/ranks/rank_1.gif" alt="Traveler" title="Traveler" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 97</dd><dd><strong>Joined:</strong> Sat Dec 23, 2006 10:28 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<form id="viewtopic" method="post" action="http://unseenstudios.com/community/viewtopic.php?f=32&amp;t=1218&amp;start=25&amp;sid=65573d350e171b908b90f1864d554f9e">

	<fieldset class="display-options" style="margin-top: 0; ">
		<a href="viewtopicc863-2.html" class="left-box left">Previous</a>		<label>Display posts from previous: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
		<label>Sort by <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select> <input type="submit" name="sort" value="Go" class="button2" /></label>
			</fieldset>

	</form>
	<hr />

<div class="topic-actions">
	<div class="buttons">
			<div class="reply-icon"><a href="posting.html" title="Post a reply"><span></span>Post a reply</a></div>
		</div>

			<div class="pagination">
			30 posts			 &bull; <a href="#" onclick="jumpto(); return false;" title="Click to jump to page…">Page <strong>2</strong> of <strong>2</strong></a> &bull; <span><a href="viewtopic7ca6.html">1</a><span class="page-sep">, </span><strong>2</strong></span>		</div>
	</div>

	<p></p><p><a href="viewforumcd74.html" class="left-box left" accesskey="r">Return to Archive (Before Alpha 2)</a></p>
	<br /><br />
	<h3><a href="viewonlineb013.html">Who is online</a></h3>
	<p>Users browsing this forum: No registered users and 1 guest</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.html" accesskey="h">Board index</a></li>
							<li class="rightside"><a>The team</a> &bull; <a>Delete all board cookies</a> &bull; All times are UTC - 6 hours </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> &copy; 2000, 2002, 2005, 2007 phpBB Group
			</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>
	</div>

</body>

<!-- Mirrored from unseenstudios.com/community/viewtopic.php?f=32&t=1218&sid=65573d350e171b908b90f1864d554f9e&start=25 by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 11 Oct 2015 22:54:32 GMT -->
</html>