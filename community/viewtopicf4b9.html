<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">

<!-- Mirrored from unseenstudios.com/community/viewtopic.php?p=2714&sid=65573d350e171b908b90f1864d554f9e by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Oct 2015 00:44:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="copyright" content="2000, 2002, 2005, 2007 phpBB Group" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<title>Unseen Studios &bull; View topic - MDJ File Format</title>

<!--
	phpBB style name: prosilver
	Based on style:   prosilver (this is the default phpBB3 style)
	Original author:  Tom Beddard ( http://www.subBlue.com/ )
	Modified by:      
	
	NOTE: This page was generated by phpBB, the free open-source bulletin board package.
	      The phpBB Group is not responsible for the content of this page and forum. For more information
	      about phpBB please visit http://www.phpbb.com
-->

<script type="text/javascript">
// <![CDATA[
	var jump_page = 'Enter the page number you wish to go to:';
	var on_page = '1';
	var per_page = '';
	var base_url = '';
	var style_cookie = 'phpBBstyle';
	var style_cookie_settings = '; path=/; domain=.unseenstudios.com';
	var onload_functions = new Array();
	var onunload_functions = new Array();

	
	/**
	* Find a member
	*/
	function find_username(url)
	{
		popup(url, 760, 570, '_usersearch');
		return false;
	}

	/**
	* New function for handling multiple calls to window.onload and window.unload by pentapenguin
	*/
	window.onload = function()
	{
		for (var i = 0; i < onload_functions.length; i++)
		{
			eval(onload_functions[i]);
		}
	}

	window.onunload = function()
	{
		for (var i = 0; i < onunload_functions.length; i++)
		{
			eval(onunload_functions[i]);
		}
	}

// ]]>
</script>
<script type="text/javascript" src="./styles/prosilver/template/styleswitcher.js"></script>
<script type="text/javascript" src="./styles/prosilver/template/forum_fn.js"></script>

<link href="./styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" media="print" title="printonly" />
<link href="style.css" rel="stylesheet" type="text/css" media="screen, projection" />

<link href="./styles/prosilver/theme/normal.css" rel="stylesheet" type="text/css" title="A" />
<link href="./styles/prosilver/theme/medium.css" rel="alternate stylesheet" type="text/css" title="A+" />
<link href="./styles/prosilver/theme/large.css" rel="alternate stylesheet" type="text/css" title="A++" />


</head>

<body id="phpbb" class="section-viewtopic ltr">

<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>
	<div id="page-header">
		<div class="headerbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<div id="site-description">
				<a href="index.html" title="Board index" id="logo"><img src="./styles/prosilver/imageset/site_logo.gif" width="139" height="52" alt="" title="" /></a>
				<h1>Unseen Studios</h1>
				<p>Game Development and More</p>
				<p class="skiplink"><a href="#start_here">Skip to content</a></p>
			</div>

		
			<span class="corners-bottom"><span></span></span></div>
		</div>

		<div class="navbar">
			<div class="inner"><span class="corners-top"><span></span></span>

			<ul class="linklist navlinks">
				<li class="icon-home"><a href="index.html" accesskey="h">Board index</a>  <strong>&#8249;</strong> <a href="viewforum4b7d.html">Archive</a> <strong>&#8249;</strong> <a href="viewforum91ec.html">Volucris</a></li>

				<li class="rightside"><a href="#" onclick="fontsizeup(); return false;" onkeypress="fontsizeup(); return false;" class="fontsize" title="Change font size">Change font size</a></li>

				<li class="rightside"><a href="http://unseenstudios.com/community/viewtopic.php?f=9&amp;t=522&amp;start=0&amp;sid=65573d350e171b908b90f1864d554f9e&amp;view=print" title="Print view" accesskey="p" class="print">Print view</a></li>			</ul>

			
			<ul class="linklist rightside">
				<li class="icon-faq"><a href="faq.html" title="Frequently Asked Questions">FAQ</a></li>
				<li class="icon-members"><a title="View complete list of members">Members</a></li>					<li class="icon-logout"><a title="Login" accesskey="l">Login</a></li>
							</ul>

			<span class="corners-bottom"><span></span></span></div>
		</div>

	</div>

	<a name="start_here"></a>
	<div id="page-body">
		
		 <h2><a href="http://unseenstudios.com/community/viewtopic.php?f=9&amp;t=522&amp;start=0&amp;sid=65573d350e171b908b90f1864d554f9e">MDJ File Format</a></h2>
<!-- NOTE: remove the style="display: none" when you want to have the forum description on the topic body --><span style="display: none">For general discussion of Project Volucris<br /></span>	<p>
					<strong>Moderators:</strong> <a>Joe M.</a>, <a>Karl G.</a>		
	</p>

<div class="topic-actions">

	<div class="buttons">
			<div class="reply-icon"><a title="Post a reply"><span></span>Post a reply</a></div>
		</div>

			<div class="pagination">
			6 posts			 &bull; Page <strong>1</strong> of <strong>1</strong>		</div>
	
</div>
<div class="clear"></div>

	<div id="p2712" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 class="first"><a href="#p2712">MDJ File Format</a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2712&amp;sid=65573d350e171b908b90f1864d554f9e#p2712"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Karl G.</a></strong> &raquo; Mon Apr 02, 2007 1:25 pm </p>

			
			<div class="content">Anyone interested in a description of Xenimus's MDJ file format along with some source code to load MDJ models?
<br />
<br />Karl</div>

			
		</div>

					<dl class="postprofile" id="profile2712">
			<dt>
				<a><img src="./images/avatars/gallery/black_white_1/yingyang_avat.gif" width="87" height="88" alt="User avatar" /></a><br />
				<a>Karl G.</a>			</dt>

			<dd>Lesser Spirit</dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2453</dd><dd><strong>Joined:</strong> Sat Mar 04, 2006 10:26 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p2713" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p2713"></a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2713&amp;sid=65573d350e171b908b90f1864d554f9e#p2713"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Xodus</a></strong> &raquo; Mon Apr 02, 2007 3:38 pm </p>

			
			<div class="content">I'm interested if I can look at it and get a basis for how basic models/textures are loaded...if that's what you're asking.  <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>

			
		</div>

					<dl class="postprofile" id="profile2713">
			<dt>
				<a>Xodus</a>			</dt>

			<dd>Villager<br /><img src="./images/ranks/rank_0.gif" alt="Villager" title="Villager" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd><dd><strong>Joined:</strong> Thu Dec 21, 2006 11:26 pm</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p2714" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p2714"></a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2714&amp;sid=65573d350e171b908b90f1864d554f9e#p2714"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Karl G.</a></strong> &raquo; Mon Apr 02, 2007 4:22 pm </p>

			
			<div class="content">Yep that's exactly what I mean.  Here's some of the information, I'll be writing a PDF on this sometime soon.  These are just my random notes, in case you feel like doing some scouting yourself.  I've also added the three main code files to the end of this post--they're pretty much a hacked together mess right now, but they get the job done.  I have a much cleaner/more optimized version that I use for PV.  Also, this code can only load non-animated meshes.
<br />
<br />This is the format of the chicken.mdj file:
<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>header&#91;52&#93; = &#123; 50, 0, &#91;&#91;0, 17, 26, 35, 44, 49, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54,&#93;&#93; 53, &#125;<br /><br />// the first two entires are actually the file-type indicator!!!<br />// The header component specified inside &#91;&#91;...&#93;&#93; specifies one more than the maximum vertex index used by the subset of its index.&nbsp; there are ***50*** maximum subsets<br />// For example, the maximum vertex of subset 0 is -1 &#40;it doesn't exist&#41;&nbsp; <br />// the maximum vertex of subset 1 is 16, 2 is 25, 3 is 34, 4 is 43, 5 is 48, 6 is 54<br />// note that the first subset includes the 128-tagged quads...<br />// the last number specifies the number of vertices - 1 &#40;or the maximum vertex index...&#41;<br /><br />Reading 54 vertices...success!<br />Reading 48 quads...success!<br /><br /><br />vertices&#91;54&#93; = &#123;<br />&nbsp; &nbsp;&#91;0&#93;: &#123; -32.34,&nbsp; &nbsp;183.00,&nbsp; &nbsp;19.14,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;1&#93;: &#123; 49.09,&nbsp; &nbsp;193.00,&nbsp; &nbsp;52.57,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;2&#93;: &#123; 51.98,&nbsp; &nbsp;193.00,&nbsp; &nbsp;-55.40,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;3&#93;: &#123; -33.65,&nbsp; &nbsp;183.00,&nbsp; &nbsp;-19.89,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;4&#93;: &#123; 170.42,&nbsp; &nbsp;156.00,&nbsp; &nbsp;-22.33,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;5&#93;: &#123; 168.77,&nbsp; &nbsp;156.00,&nbsp; &nbsp;14.65,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;6&#93;: &#123; 42.20,&nbsp; &nbsp;63.00,&nbsp; &nbsp;46.45,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;7&#93;: &#123; -50.37,&nbsp; &nbsp;101.00,&nbsp; &nbsp;20.83,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;8&#93;: &#123; 39.05,&nbsp; &nbsp;63.00,&nbsp; &nbsp;-59.62,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;9&#93;: &#123; -55.72,&nbsp; &nbsp;101.00,&nbsp; &nbsp;-16.27,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;10&#93;: &#123; 154.71,&nbsp; &nbsp;126.00,&nbsp; &nbsp;18.41,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;11&#93;: &#123; 152.46,&nbsp; &nbsp;126.00,&nbsp; &nbsp;-24.64,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;12&#93;: &#123; 34.56,&nbsp; &nbsp;85.44,&nbsp; &nbsp;-37.73,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x4 &#125;<br />&nbsp; &nbsp;&#91;13&#93;: &#123; 38.75,&nbsp; &nbsp;84.09,&nbsp; &nbsp;26.33,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x3 &#125;<br />&nbsp; &nbsp;&#91;14&#93;: &#123; -31.15,&nbsp; &nbsp;161.00,&nbsp; &nbsp;-20.30,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x6 &#125;<br />&nbsp; &nbsp;&#91;15&#93;: &#123; -32.19,&nbsp; &nbsp;161.00,&nbsp; &nbsp;15.88,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x5 &#125;<br />&nbsp; &nbsp;&#91;16&#93;: &#123; -43.02,&nbsp; &nbsp;142.00,&nbsp; &nbsp;0.95,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x2 &#125;<br />&nbsp; &nbsp;&#91;17&#93;: &#123; -44.33,&nbsp; &nbsp;89.00,&nbsp; &nbsp;18.53,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;18&#93;: &#123; -52.26,&nbsp; &nbsp;40.00,&nbsp; &nbsp;14.39,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;19&#93;: &#123; -80.05,&nbsp; &nbsp;64.00,&nbsp; &nbsp;1.90,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;20&#93;: &#123; -69.02,&nbsp; &nbsp;51.00,&nbsp; &nbsp;0.09,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;21&#93;: &#123; -78.89,&nbsp; &nbsp;64.00,&nbsp; &nbsp;-7.08,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;22&#93;: &#123; -40.65,&nbsp; &nbsp;89.00,&nbsp; &nbsp;-20.42,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;23&#93;: &#123; -95.98,&nbsp; &nbsp;56.00,&nbsp; &nbsp;-2.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;24&#93;: &#123; -67.93,&nbsp; &nbsp;51.00,&nbsp; &nbsp;-4.89,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;25&#93;: &#123; -53.62,&nbsp; &nbsp;40.00,&nbsp; &nbsp;-22.64,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;26&#93;: &#123; -3.74,&nbsp; &nbsp;-80.09,&nbsp; &nbsp;2.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;27&#93;: &#123; 2.26,&nbsp; &nbsp;-80.09,&nbsp; &nbsp;4.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;28&#93;: &#123; 12.26,&nbsp; &nbsp;-0.09,&nbsp; &nbsp;10.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;29&#93;: &#123; -9.74,&nbsp; &nbsp;-0.09,&nbsp; &nbsp;5.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;30&#93;: &#123; 0.26,&nbsp; &nbsp;-80.09,&nbsp; &nbsp;-4.62,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;31&#93;: &#123; 8.26,&nbsp; &nbsp;-0.09,&nbsp; &nbsp;-5.62,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;32&#93;: &#123; -34.74,&nbsp; &nbsp;-79.09,&nbsp; &nbsp;-9.62,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;33&#93;: &#123; -29.74,&nbsp; &nbsp;-80.09,&nbsp; &nbsp;27.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;34&#93;: &#123; -51.74,&nbsp; &nbsp;-80.09,&nbsp; &nbsp;15.38,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;35&#93;: &#123; -3.53,&nbsp; &nbsp;-81.44,&nbsp; &nbsp;-0.30,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;36&#93;: &#123; 2.54,&nbsp; &nbsp;-81.44,&nbsp; &nbsp;-2.09,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;37&#93;: &#123; 12.74,&nbsp; &nbsp;-1.44,&nbsp; &nbsp;-7.73,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;38&#93;: &#123; -9.42,&nbsp; &nbsp;-1.44,&nbsp; &nbsp;-3.50,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;39&#93;: &#123; 8.19,&nbsp; &nbsp;-1.44,&nbsp; &nbsp;8.12,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;40&#93;: &#123; 0.23,&nbsp; &nbsp;-81.44,&nbsp; &nbsp;6.84,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;41&#93;: &#123; -33.82,&nbsp; &nbsp;-80.44,&nbsp; &nbsp;9.72,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;42&#93;: &#123; -27.75,&nbsp; &nbsp;-81.44,&nbsp; &nbsp;-25.02,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;43&#93;: &#123; -52.08,&nbsp; &nbsp;-81.44,&nbsp; &nbsp;-15.79,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;44&#93;: &#123; -1.40,&nbsp; &nbsp;-30.00,&nbsp; &nbsp;10.26,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;45&#93;: &#123; 55.14,&nbsp; &nbsp;-54.00,&nbsp; &nbsp;59.57,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;46&#93;: &#123; 144.93,&nbsp; &nbsp;13.00,&nbsp; &nbsp;73.10,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;47&#93;: &#123; 125.79,&nbsp; &nbsp;-9.00,&nbsp; &nbsp;78.90,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;48&#93;: &#123; 63.84,&nbsp; &nbsp;32.00,&nbsp; &nbsp;62.27,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;49&#93;: &#123; -1.56,&nbsp; &nbsp;-30.00,&nbsp; &nbsp;-3.79,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;50&#93;: &#123; 50.18,&nbsp; &nbsp;-54.00,&nbsp; &nbsp;-64.80,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;51&#93;: &#123; 125.79,&nbsp; &nbsp;-9.00,&nbsp; &nbsp;-85.75,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;52&#93;: &#123; 145.30,&nbsp; &nbsp;13.00,&nbsp; &nbsp;-77.79,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&nbsp; &nbsp;&#91;53&#93;: &#123; 66.11,&nbsp; &nbsp;32.00,&nbsp; &nbsp;-61.42,&nbsp; &nbsp;0x4B48C8C8,&nbsp; &nbsp;0x0 &#125;<br />&#125;<br /><br />// there is a DWORD here that specifies the number of quads - 1<br /><br /><br />quads&#91;48&#93; = &#123;<br />&nbsp; &nbsp;&#91;0&#93;:&nbsp; &nbsp;&#123; 0,&nbsp; &nbsp;1,&nbsp; &nbsp;2,&nbsp; &nbsp;3,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;1&#93;:&nbsp; &nbsp;&#123; 5,&nbsp; &nbsp;4,&nbsp; &nbsp;2,&nbsp; &nbsp;1,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;2&#93;:&nbsp; &nbsp;&#123; 22,&nbsp; &nbsp;17,&nbsp; &nbsp;0,&nbsp; &nbsp;3,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;3&#93;:&nbsp; &nbsp;&#123; 7,&nbsp; &nbsp;6,&nbsp; &nbsp;1,&nbsp; &nbsp;0,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;4&#93;:&nbsp; &nbsp;&#123; 9,&nbsp; &nbsp;8,&nbsp; &nbsp;6,&nbsp; &nbsp;7,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;5&#93;:&nbsp; &nbsp;&#123; 9,&nbsp; &nbsp;3,&nbsp; &nbsp;2,&nbsp; &nbsp;8,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;6&#93;:&nbsp; &nbsp;&#123; 10,&nbsp; &nbsp;5,&nbsp; &nbsp;1,&nbsp; &nbsp;6,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;7&#93;:&nbsp; &nbsp;&#123; 17,&nbsp; &nbsp;18,&nbsp; &nbsp;7,&nbsp; &nbsp;0,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;8&#93;:&nbsp; &nbsp;&#123; 3,&nbsp; &nbsp;9,&nbsp; &nbsp;25,&nbsp; &nbsp;22,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;9&#93;:&nbsp; &nbsp;&#123; 11,&nbsp; &nbsp;8,&nbsp; &nbsp;2,&nbsp; &nbsp;4,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;10&#93;:&nbsp; &nbsp;&#123; 5,&nbsp; &nbsp;10,&nbsp; &nbsp;11,&nbsp; &nbsp;4,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;11&#93;:&nbsp; &nbsp;&#123; 11,&nbsp; &nbsp;10,&nbsp; &nbsp;6,&nbsp; &nbsp;8,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;12&#93;:&nbsp; &nbsp;&#123; 18,&nbsp; &nbsp;25,&nbsp; &nbsp;9,&nbsp; &nbsp;7,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;13&#93;:&nbsp; &nbsp;&#123; 21,&nbsp; &nbsp;19,&nbsp; &nbsp;17,&nbsp; &nbsp;22,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;14&#93;:&nbsp; &nbsp;&#123; 19,&nbsp; &nbsp;20,&nbsp; &nbsp;18,&nbsp; &nbsp;17,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;15&#93;:&nbsp; &nbsp;&#123; 20,&nbsp; &nbsp;24,&nbsp; &nbsp;25,&nbsp; &nbsp;18,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;16&#93;:&nbsp; &nbsp;&#123; 24,&nbsp; &nbsp;21,&nbsp; &nbsp;22,&nbsp; &nbsp;25,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;17&#93;:&nbsp; &nbsp;&#123; 23,&nbsp; &nbsp;23,&nbsp; &nbsp;19,&nbsp; &nbsp;21,&nbsp; &nbsp;&#40;0.35, 0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.58&#41;,&nbsp; &nbsp;&#40;0.35,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;18&#93;:&nbsp; &nbsp;&#123; 23,&nbsp; &nbsp;23,&nbsp; &nbsp;21,&nbsp; &nbsp;24,&nbsp; &nbsp;&#40;0.35, 0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.58&#41;,&nbsp; &nbsp;&#40;0.35,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;19&#93;:&nbsp; &nbsp;&#123; 23,&nbsp; &nbsp;23,&nbsp; &nbsp;20,&nbsp; &nbsp;19,&nbsp; &nbsp;&#40;0.35, 0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.58&#41;,&nbsp; &nbsp;&#40;0.35,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;20&#93;:&nbsp; &nbsp;&#123; 26,&nbsp; &nbsp;27,&nbsp; &nbsp;28,&nbsp; &nbsp;29,&nbsp; &nbsp;&#40;0.36, 0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.56&#41;,&nbsp; &nbsp;&#40;0.36,0.56&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;21&#93;:&nbsp; &nbsp;&#123; 31,&nbsp; &nbsp;30,&nbsp; &nbsp;26,&nbsp; &nbsp;29,&nbsp; &nbsp;&#40;0.36, 0.56&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.56&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;22&#93;:&nbsp; &nbsp;&#123; 28,&nbsp; &nbsp;27,&nbsp; &nbsp;30,&nbsp; &nbsp;31,&nbsp; &nbsp;&#40;0.37, 0.56&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.56&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;23&#93;:&nbsp; &nbsp;&#123; 32,&nbsp; &nbsp;32,&nbsp; &nbsp;26,&nbsp; &nbsp;30,&nbsp; &nbsp;&#40;0.36, 0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;24&#93;:&nbsp; &nbsp;&#123; 33,&nbsp; &nbsp;33,&nbsp; &nbsp;27,&nbsp; &nbsp;26,&nbsp; &nbsp;&#40;0.36, 0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;25&#93;:&nbsp; &nbsp;&#123; 34,&nbsp; &nbsp;34,&nbsp; &nbsp;26,&nbsp; &nbsp;30,&nbsp; &nbsp;&#40;0.37, 0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;26&#93;:&nbsp; &nbsp;&#123; 34,&nbsp; &nbsp;34,&nbsp; &nbsp;27,&nbsp; &nbsp;26,&nbsp; &nbsp;&#40;0.37, 0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.37,0.57&#41;,&nbsp; &nbsp;&#40;0.36,0.57&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;3,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;27&#93;:&nbsp; &nbsp;&#123; 36,&nbsp; &nbsp;35,&nbsp; &nbsp;38,&nbsp; &nbsp;37,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;28&#93;:&nbsp; &nbsp;&#123; 40,&nbsp; &nbsp;39,&nbsp; &nbsp;38,&nbsp; &nbsp;35,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;29&#93;:&nbsp; &nbsp;&#123; 36,&nbsp; &nbsp;37,&nbsp; &nbsp;39,&nbsp; &nbsp;40,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;,&nbsp; &nbsp;&#40;0.37,0.55&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;30&#93;:&nbsp; &nbsp;&#123; 41,&nbsp; &nbsp;41,&nbsp; &nbsp;40,&nbsp; &nbsp;35,&nbsp; &nbsp;&#40;0.38, 0.58&#41;,&nbsp; &nbsp;&#40;0.38,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;31&#93;:&nbsp; &nbsp;&#123; 42,&nbsp; &nbsp;42,&nbsp; &nbsp;35,&nbsp; &nbsp;36,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;32&#93;:&nbsp; &nbsp;&#123; 43,&nbsp; &nbsp;43,&nbsp; &nbsp;40,&nbsp; &nbsp;35,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;33&#93;:&nbsp; &nbsp;&#123; 43,&nbsp; &nbsp;43,&nbsp; &nbsp;35,&nbsp; &nbsp;36,&nbsp; &nbsp;&#40;0.37, 0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;,&nbsp; &nbsp;&#40;0.37,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;4,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;34&#93;:&nbsp; &nbsp;&#123; 23,&nbsp; &nbsp;23,&nbsp; &nbsp;24,&nbsp; &nbsp;20,&nbsp; &nbsp;&#40;0.35, 0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.56&#41;,&nbsp; &nbsp;&#40;0.39,0.58&#41;,&nbsp; &nbsp;&#40;0.35,0.58&#41;&nbsp; &nbsp;1,&nbsp; &nbsp;2,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;35&#93;:&nbsp; &nbsp;&#123; 44,&nbsp; &nbsp;45,&nbsp; &nbsp;48,&nbsp; &nbsp;0,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;5,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;36&#93;:&nbsp; &nbsp;&#123; 47,&nbsp; &nbsp;46,&nbsp; &nbsp;48,&nbsp; &nbsp;45,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;5,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;37&#93;:&nbsp; &nbsp;&#123; 45,&nbsp; &nbsp;48,&nbsp; &nbsp;46,&nbsp; &nbsp;47,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;5,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;38&#93;:&nbsp; &nbsp;&#123; 44,&nbsp; &nbsp;0,&nbsp; &nbsp;48,&nbsp; &nbsp;45,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;5,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;39&#93;:&nbsp; &nbsp;&#123; 50,&nbsp; &nbsp;49,&nbsp; &nbsp;3,&nbsp; &nbsp;53,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;6,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;40&#93;:&nbsp; &nbsp;&#123; 53,&nbsp; &nbsp;50,&nbsp; &nbsp;51,&nbsp; &nbsp;52,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;6,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;41&#93;:&nbsp; &nbsp;&#123; 3,&nbsp; &nbsp;49,&nbsp; &nbsp;50,&nbsp; &nbsp;53,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.00&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;6,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;42&#93;:&nbsp; &nbsp;&#123; 12,&nbsp; &nbsp;12,&nbsp; &nbsp;12,&nbsp; &nbsp;12,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;,&nbsp; &nbsp;&#40;4.00,4.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;128&#125;<br />&nbsp; &nbsp;&#91;43&#93;:&nbsp; &nbsp;&#123; 13,&nbsp; &nbsp;13,&nbsp; &nbsp;13,&nbsp; &nbsp;13,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;,&nbsp; &nbsp;&#40;4.00,4.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;128&#125;<br />&nbsp; &nbsp;&#91;44&#93;:&nbsp; &nbsp;&#123; 50,&nbsp; &nbsp;53,&nbsp; &nbsp;52,&nbsp; &nbsp;51,&nbsp; &nbsp;&#40;0.24, 0.00&#41;,&nbsp; &nbsp;&#40;0.00,0.00&#41;,&nbsp; &nbsp;&#40;0.00,0.49&#41;,&nbsp; &nbsp;&#40;0.24,0.49&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;6,&nbsp; &nbsp;0&#125;<br />&nbsp; &nbsp;&#91;45&#93;:&nbsp; &nbsp;&#123; 14,&nbsp; &nbsp;14,&nbsp; &nbsp;14,&nbsp; &nbsp;14,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;,&nbsp; &nbsp;&#40;4.00,4.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;128&#125;<br />&nbsp; &nbsp;&#91;46&#93;:&nbsp; &nbsp;&#123; 15,&nbsp; &nbsp;15,&nbsp; &nbsp;15,&nbsp; &nbsp;15,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;,&nbsp; &nbsp;&#40;4.00,4.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;128&#125;<br />&nbsp; &nbsp;&#91;47&#93;:&nbsp; &nbsp;&#123; 16,&nbsp; &nbsp;16,&nbsp; &nbsp;16,&nbsp; &nbsp;16,&nbsp; &nbsp;&#40;0.00, 0.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;,&nbsp; &nbsp;&#40;4.00,4.00&#41;,&nbsp; &nbsp;&#40;4.00,0.00&#41;&nbsp; &nbsp;0,&nbsp; &nbsp;1,&nbsp; &nbsp;128&#125;<br />&#125;<br /><br />Summary:&nbsp; 3500 total bytes, 0 bytes left &#40;should be 0&#41;<br />54 vertices, 48 quads<br /><br />Saving X-format file as &quot;C:\Documents and Settings\Karl\My Documents\Volucris\Projects\MDJViewer\Debug\chicken.X&quot;</code></dd></dl><br /><br /><br /><br /><br />Here's &quot;mdjviewmain.cpp&quot;<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>#include &quot;mdjview.h&quot;<br /><br />FILE* g_pOutputFile;<br /><br />void output&#40; char* pFormat, ... &#41;<br />&#123;<br />&nbsp; &nbsp; va_list args;<br /><br />&nbsp; &nbsp; va_start&#40; args, pFormat &#41;;<br />&nbsp; &nbsp; char string&#91;1024&#93;;<br />&nbsp; &nbsp; vsprintf_s&#40; string, sizeof&#40;string&#41;, pFormat, args &#41;;<br />&nbsp; &nbsp; va_end&#40; args &#41;;<br /><br />&nbsp; &nbsp; printf&#40; &quot;%s&quot;, string &#41;;<br />&nbsp; &nbsp; fprintf&#40; g_pOutputFile, &quot;%s&quot;, string &#41;;<br />&nbsp; &nbsp; fflush&#40; g_pOutputFile &#41;;<br />&#125;<br /><br /><br />int run&#40; int nArgs, char** ppArgs &#41;<br />&#123;<br />&nbsp; &nbsp; printf&#40; &quot;MDJ Viewer by Karl is loading...\n&quot; &#41;;<br /><br />&nbsp; &nbsp; // Check the number of arguments<br />&nbsp; &nbsp; if&#40; nArgs &lt; 2 &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; printf&#40; &quot;No file specified.\n&quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; // debug line<br />&nbsp; &nbsp; ppArgs&#91;1&#93; = &quot;C:\\Documents and Settings\\Karl\\My Documents\\Volucris\\Projects\\MDJViewer\\Debug\\cauld.MDJ&quot;;<br /><br />&nbsp; &nbsp; // Print the name of the file being processed<br />&nbsp; &nbsp; printf&#40; &quot;Reading MDJ model file \&quot;%s\&quot;\n&quot;, ppArgs&#91;1&#93; &#41;;<br /><br />&nbsp; &nbsp; // Create an X-file to save this as<br />&nbsp; &nbsp; char xName&#91;MAX_PATH&#93;;<br />&nbsp; &nbsp; strcpy_s&#40; xName, sizeof&#40;xName&#41;, ppArgs&#91;1&#93; &#41;;<br />&nbsp; &nbsp; int len = strlen&#40;xName&#41;;<br />&nbsp; &nbsp; xName&#91;len-3&#93;='X';<br />&nbsp; &nbsp; xName&#91;len-2&#93;='\0';<br /><br />&nbsp; &nbsp; // Open the output file<br />&nbsp; &nbsp; fopen_s&#40; &amp;g_pOutputFile, &quot;output.txt&quot;, &quot;wt&quot; &#41;;<br /><br />&nbsp; &nbsp; // Open this file<br />&nbsp; &nbsp; FILE* pFile;<br />&nbsp; &nbsp; fopen_s&#40; &amp;pFile, ppArgs&#91;1&#93;, &quot;rb&quot; &#41;;<br />&nbsp; &nbsp; if&#40; pFile == NULL &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Unable to open file.\n&quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; // Read the ID info<br />&nbsp; &nbsp; DWORD fileType;<br />&nbsp; &nbsp; fread&#40; &amp;fileType, sizeof&#40;DWORD&#41;, 1, pFile &#41;;<br /><br />&nbsp; &nbsp; // Right now, only this file type can be decoded<br />&nbsp; &nbsp; if&#40; fileType == 50 &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD header&#91;52&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; &amp;header&#91;1&#93;, sizeof&#40;DWORD&#41;, 51, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; header&#91;0&#93; = fileType;<br />&nbsp; &nbsp; &nbsp; &nbsp; pMDJHeader = header;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print the header<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;header&#91;52&#93; = &#123; &quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD i = 0; i &lt; 52; ++i &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;%i, &quot;, header&#91;i&#93; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Discover how many vertices there are<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD vertices = header&#91;51&#93; + 1;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Create and fill in the vertex buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Reading %i vertices...&quot;, vertices &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJVertex* pVB = new MDJVertex&#91;vertices&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; pVB, sizeof&#40;MDJVertex&#41;, vertices, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;success!\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Read the number of quads ***note this might be a WORD followed by a WORD that is usually 0***<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD quads;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; &amp;quads, sizeof&#40;DWORD&#41;, 1, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; quads++; // This number is 1 less than it should be<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Create and fill in the quad buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Reading %i quads...&quot;, quads &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJQuad* pQB = new MDJQuad&#91;quads&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; pQB, sizeof&#40;MDJQuad&#41;, quads, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;success!\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print all of the information about the model's vertices<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nvertices&#91;%i&#93; = &#123;\n&quot;, vertices &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD v = 0; v &lt; vertices; ++v &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\t&#91;%i&#93;: &#123; %.02f,\t%.02f,\t%.02f,\t0x%X,\t0x%X &#125;\n&quot;, v, pVB&#91;v&#93;.x, pVB&#91;v&#93;.y, pVB&#91;v&#93;.z, pVB&#91;v&#93;.color, pVB&#91;v&#93;.childBone &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print all of the information about the model's quads<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nquads&#91;%i&#93; = &#123;\n&quot;, quads &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt; quads; ++q &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40;&quot;\t&#91;%i&#93;:\t&#123; %i,\t%i,\t%i,\t%i,\t&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;&#40;%.02f, %.02f&#41;,\t&#40;%.02f,%.02f&#41;,\t&#40;%.02f,%.02f&#41;,\t&#40;%.02f,%.02f&#41;\t&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;%i,\t%i,\t%i&#125;\n&quot;, q,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.indices&#91;0&#93;, pQB&#91;q&#93;.indices&#91;1&#93;, pQB&#91;q&#93;.indices&#91;2&#93;, pQB&#91;q&#93;.indices&#91;3&#93;, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.texcoords&#91;0&#93;, pQB&#91;q&#93;.texcoords&#91;1&#93;, pQB&#91;q&#93;.texcoords&#91;2&#93;, pQB&#91;q&#93;.texcoords&#91;3&#93;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.texcoords&#91;4&#93;, pQB&#91;q&#93;.texcoords&#91;5&#93;, pQB&#91;q&#93;.texcoords&#91;6&#93;, pQB&#91;q&#93;.texcoords&#91;7&#93;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.tail&#91;0&#93;, pQB&#91;q&#93;.tail&#91;1&#93;, pQB&#91;q&#93;.tail&#91;2&#93; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Output information about those interesting quad-tails!<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD numSubsets = 0, numTail0s = 0;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt;quads&gt; numSubsets &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numSubsets = pQB&#91;q&#93;.tail&#91;1&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; pQB&#91;q&#93;.tail&#91;0&#93; &gt; numTail0s &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; numTail0s = pQB&#91;q&#93;.tail&#91;0&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Print bindings for the tail0-subsets &#40;and just for kicks, print that index in the header&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD t0 = 0; t0 &lt; numTail0s+1; ++t0 &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; bool printedHeader = false;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD s = 0; s &lt; numSubsets; ++s &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD occurances = 0;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt;quads&gt; 0 &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; !printedHeader &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\ntail&#91;%i&#93; = &#123; &quot;, t0 &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; printedHeader = true;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;%i &#40;%i&#41;, &quot;, s, occurances &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print bytes left<br />&nbsp; &nbsp; &nbsp; &nbsp; int readEnd = ftell&#40; pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fseek&#40; pFile, 0, SEEK_END &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; int end = ftell&#40; pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nSummary:&nbsp; %i total bytes, %i bytes left &#40;should be 0&#41;\n%i vertices, %i quads\n\n&quot;, end, end - readEnd, vertices, quads &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Saving X-format file as \&quot;%s\&quot;\n&quot;, xName &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Show the model<br />&nbsp; &nbsp; &nbsp; &nbsp; display&#40; xName, vertices, pVB, quads, pQB &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Erase the buffers<br />&nbsp; &nbsp; &nbsp; &nbsp; delete&#91;&#93; pQB;<br />&nbsp; &nbsp; &nbsp; &nbsp; delete&#91;&#93; pVB;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; else if&#40; fileType == 12866L &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; // Start reading the header after we've read the type indicator<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJHeaderItem66 header&#91;51&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; header, sizeof&#40;MDJHeaderItem66&#41;, 51, pFile &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print the header<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;header&#91;51&#93; = &#123; &quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD i = 0; i &lt; 51; ++i &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;0x%x 0x%X, &quot;, header&#91;i&#93;.value1byte, header&#91;i&#93;.value4byte &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Discover how many vertices there are<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD vertices = header&#91;50&#93;.value4byte + 1;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Create and fill in the vertex buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Reading %i vertices...&quot;, vertices &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJVertex66* pVB66 = new MDJVertex66&#91;vertices&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; pVB66, sizeof&#40;MDJVertex66&#41;, vertices, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;success!\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print all of the information about the model's vertices<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nvertices&#91;%i&#93; = &#123;\n&quot;, vertices &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD v = 0; v &lt; vertices; ++v &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\t&#91;%i&#93;: &#123; %.02f,\t%.02f,\t%.02f,\t0x%X,\t0x%X, \t0x%X &#125;\n&quot;, v, pVB66&#91;v&#93;.x, pVB66&#91;v&#93;.y, pVB66&#91;v&#93;.z, pVB66&#91;v&#93;.color, pVB66&#91;v&#93;.zero, pVB66&#91;v&#93;.value &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Convert to the normal vertex type &#40;we might lose data here&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJVertex* pVB = new MDJVertex&#91;vertices&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD v = 0; v &lt; vertices; ++v &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memcpy&#40; &amp;pVB&#91;v&#93;, &amp;pVB66&#91;v&#93;, sizeof&#40;MDJVertex&#41; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; delete&#91;&#93; pVB66;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Read the number of quads ***note this might be a WORD followed by a WORD that is usually 0***<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD quads;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; &amp;quads, sizeof&#40;DWORD&#41;, 1, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; quads++; // This number is 1 less than it should be<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Create and fill in the quad buffer<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Reading %i quads...&quot;, quads &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; MDJQuad* pQB = new MDJQuad&#91;quads&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fread&#40; pQB, sizeof&#40;MDJQuad&#41;, quads, pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;success!\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print all of the information about the model's quads<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nquads&#91;%i&#93; = &#123;\n&quot;, quads &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt; quads; ++q &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\t&#91;%i&#93;:\t&#123;%i,\t%i,\t%i,\t%i, &quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot;\t&#40;%.02f,%.02f&#41;, &#40;%.02f,%.02f&#41;, &#40;%.02f,%.02f&#41;, &#40;%.02f,%.02f&#41;&quot;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &quot; \t%i,\t%i,\t%i&#125;\n&quot;, q, pQB&#91;q&#93;.indices&#91;0&#93;, pQB&#91;q&#93;.indices&#91;1&#93;, pQB&#91;q&#93;.indices&#91;2&#93;, pQB&#91;q&#93;.indices&#91;3&#93;, <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.texcoords&#91;0&#93;, pQB&#91;q&#93;.texcoords&#91;1&#93;, pQB&#91;q&#93;.texcoords&#91;2&#93;, pQB&#91;q&#93;.texcoords&#91;3&#93;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.texcoords&#91;4&#93;, pQB&#91;q&#93;.texcoords&#91;5&#93;, pQB&#91;q&#93;.texcoords&#91;6&#93;, pQB&#91;q&#93;.texcoords&#91;7&#93;,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pQB&#91;q&#93;.tail&#91;0&#93;, pQB&#91;q&#93;.tail&#91;1&#93;, pQB&#91;q&#93;.tail&#91;2&#93; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;&#125;\n&quot; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Print bytes left<br />&nbsp; &nbsp; &nbsp; &nbsp; int readEnd = ftell&#40; pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; fseek&#40; pFile, 0, SEEK_END &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; int end = ftell&#40; pFile &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;\n\nSummary:&nbsp; %i total bytes, %i bytes left &#40;should be 0&#41;\n%i vertices, %i quads\n\n&quot;, end, end - readEnd, vertices, quads &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Saving X-format file as \&quot;%s\&quot;\n&quot;, xName &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Show the model<br />&nbsp; &nbsp; &nbsp; &nbsp; display&#40; xName, vertices, pVB, quads, pQB &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Erase buffers<br />&nbsp; &nbsp; &nbsp; &nbsp; delete&#91;&#93; pVB;<br />&nbsp; &nbsp; &nbsp; &nbsp; delete&#91;&#93; pQB;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; else<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;Header indicates this is an unsupported file type.\n&quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; return -1;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; // Close the file<br />&nbsp; &nbsp; fclose&#40; pFile &#41;;<br />&nbsp; &nbsp; fclose&#40; g_pOutputFile &#41;;<br /><br />&nbsp; &nbsp; // Success<br />&nbsp; &nbsp; return 0;<br />&#125;<br />#include &lt;d3dx9&gt;<br /><br />// Entry point to the application<br />int main&#40; int nArgs, char** ppArgs &#41;<br />&#123;<br /><br />&nbsp; &nbsp; // Execute the app<br />&nbsp; &nbsp; int c = run&#40; nArgs, ppArgs &#41;;<br /><br />&nbsp; &nbsp; // Wait for something to happen<br />&nbsp; &nbsp; system&#40;&quot;PAUSE&quot;&#41;;<br /><br />&nbsp; &nbsp; // Return the code<br />&nbsp; &nbsp; return c;<br />&#125;</code></dd></dl><br /><br /><br />Here's &quot;mdjview.h&quot;<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>#include &lt;windows&gt;<br />#include &lt;stdio&gt;<br /><br /><br />#pragma pack&#40; push, 1 &#41; // Don't pack here--we need these sizes to be exact<br />struct MDJVertex<br />&#123;<br />&nbsp; &nbsp; FLOAT x, y, z;<br />&nbsp; &nbsp; DWORD color;<br />&nbsp; &nbsp; DWORD childBone;<br />&#125;;<br /><br />struct MDJQuad<br />&#123;<br />&nbsp; &nbsp; WORD indices&#91;4&#93;;<br />&nbsp; &nbsp; FLOAT texcoords&#91;8&#93;;<br />&nbsp; &nbsp; WORD tail&#91;3&#93;; // tail&#91;0&#93; is the TEXTURE FOR THIS MESH<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // tail&#91;1&#93; is the animation subset for the mesh<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // tail&#91;2&#93; is ?<br />&#125;;<br /><br />struct MDJHeaderItem66<br />&#123;<br />&nbsp; &nbsp; BYTE value1byte;<br />&nbsp; &nbsp; DWORD value4byte;<br />&#125;;<br /><br />struct MDJVertex66<br />&#123;<br />&nbsp; &nbsp; FLOAT x, y, z;<br />&nbsp; &nbsp; DWORD color;<br />&nbsp; &nbsp; DWORD zero;<br />&nbsp; &nbsp; BYTE value;<br />&#125;;<br /><br /><br />#pragma pack&#40;pop&#41;<br /><br />extern DWORD* pMDJHeader;<br /><br />void output&#40; char* pFormat, ... &#41;;<br />void display&#40; const char* pFileNameX, DWORD vertices, MDJVertex* pVertices, DWORD quads, MDJQuad* pQuads &#41;;</code></dd></dl><br /><br /><br />And (finally!) here's display.cpp<br /><dl class="codebox"><dt>Code: <a href="#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>#include &quot;mdjview.h&quot;<br />#include &lt;Windows&gt;<br />#include &lt;mmsystem&gt;<br />#include &lt;d3dx9&gt;<br />#pragma warning&#40; disable : 4996 &#41; // disable deprecated warning <br />#include &lt;strsafe&gt;<br />#pragma warning&#40; default : 4996 &#41; <br />#include &lt;string&gt;<br />#include &lt;vector&gt;<br /><br />//-----------------------------------------------------------------------------<br />// Global variables<br />//-----------------------------------------------------------------------------<br />LPDIRECT3D9&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_pD3D&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= NULL; // Used to create the D3DDevice<br />LPDIRECT3DDEVICE9&nbsp; &nbsp; &nbsp; &nbsp;g_pd3dDevice&nbsp; &nbsp; &nbsp;= NULL; // Our rendering device<br /><br />LPD3DXMESH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_pMesh&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = NULL; // Our mesh object in sysmem<br />D3DMATERIAL9*&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_pMeshMaterials = NULL; // Materials for our mesh<br /><br />LPDIRECT3DTEXTURE9*&nbsp; &nbsp; &nbsp;g_pMeshTextures&nbsp; = NULL; // Textures for our mesh<br />DWORD&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;g_dwNumTextures&nbsp; = 0L;&nbsp; &nbsp;// Number of mesh materials<br />DWORD* pMDJHeader = NULL;<br /><br />FLOAT g_Height = 1.0f;<br />DWORD g_CurrentSubset = 0;<br />bool g_bShowAll = true;<br /><br />DWORD g_CurrentTexture = 0;<br /><br /><br />struct MeshVertex<br />&#123;<br />&nbsp; &nbsp; FLOAT x, y, z;<br />&nbsp; &nbsp; D3DCOLOR color;<br />&nbsp; &nbsp; FLOAT u, v;<br />&#125;;<br /><br />#define D3DFVF_MESHVERTEX &#40;D3DFVF_XYZ|D3DFVF_DIFFUSE|D3DFVF_TEX1&#41;<br /><br /><br /><br />//-----------------------------------------------------------------------------<br />// Name: InitD3D&#40;&#41;<br />// Desc: Initializes Direct3D<br />//-----------------------------------------------------------------------------<br />HRESULT InitD3D&#40; HWND hWnd &#41;<br />&#123;<br />&nbsp; &nbsp; // Create the D3D object.<br />&nbsp; &nbsp; if&#40; NULL == &#40; g_pD3D = Direct3DCreate9&#40; D3D_SDK_VERSION &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; return E_FAIL;<br /><br />&nbsp; &nbsp; // Set up the structure used to create the D3DDevice. Since we are now<br />&nbsp; &nbsp; // using more complex geometry, we will create a device with a zbuffer.<br />&nbsp; &nbsp; D3DPRESENT_PARAMETERS d3dpp; <br />&nbsp; &nbsp; ZeroMemory&#40; &amp;d3dpp, sizeof&#40;d3dpp&#41; &#41;;<br />&nbsp; &nbsp; d3dpp.Windowed = TRUE;<br />&nbsp; &nbsp; d3dpp.SwapEffect = D3DSWAPEFFECT_DISCARD;<br />&nbsp; &nbsp; d3dpp.BackBufferFormat = D3DFMT_UNKNOWN;<br />&nbsp; &nbsp; d3dpp.EnableAutoDepthStencil = TRUE;<br />&nbsp; &nbsp; d3dpp.AutoDepthStencilFormat = D3DFMT_D16;<br /><br />&nbsp; &nbsp; // Create the D3DDevice<br />&nbsp; &nbsp; if&#40; FAILED&#40; g_pD3D-&gt;CreateDevice&#40; D3DADAPTER_DEFAULT, D3DDEVTYPE_HAL, hWnd,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D3DCREATE_SOFTWARE_VERTEXPROCESSING,<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &amp;d3dpp, &amp;g_pd3dDevice &#41; &#41; &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; return E_FAIL;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; // Turn on the zbuffer<br />&nbsp; &nbsp; g_pd3dDevice-&gt;SetRenderState&#40; D3DRS_ZENABLE, TRUE &#41;;<br /><br />&nbsp; &nbsp; // Turn on ambient lighting <br />&nbsp; &nbsp; g_pd3dDevice-&gt;SetRenderState&#40; D3DRS_LIGHTING, FALSE &#41;;<br />&nbsp; &nbsp; g_pd3dDevice-&gt;SetRenderState&#40; D3DRS_AMBIENT, 0xffffffff &#41;;<br /><br />&nbsp; &nbsp; return S_OK;<br />&#125;<br /><br /><br /><br /><br />//-----------------------------------------------------------------------------<br />// Name: InitGeometry&#40;&#41;<br />// Desc: Load the mesh and build the material and texture arrays<br />//-----------------------------------------------------------------------------<br />HRESULT InitGeometry&#40; const char* pFileNameX, DWORD vertices, MDJVertex* pVertices, DWORD quads, MDJQuad* pQuads, FLOAT* pRadius &#41;<br />&#123;<br />&nbsp; &nbsp; FLOAT maxRadiusSq = 0.0f;<br /><br />&nbsp; &nbsp; // Find all of the texture files in the directory<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; std::vector&lt;std&gt; textures;<br />&nbsp; &nbsp; &nbsp; &nbsp; WIN32_FIND_DATA data;<br />&nbsp; &nbsp; &nbsp; &nbsp; ZeroMemory&#40; &amp;data, sizeof&#40;data&#41; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; HANDLE hFind = FindFirstFile&#40; &quot;*.png&quot;, &amp;data &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; if&#40; data.nFileSizeLow &gt; 0 &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; do<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; textures.push_back&#40; data.cFileName &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while&#40; FindNextFile&#40; hFind, &amp;data &#41; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Create a texture bank<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_pMeshTextures = new LPDIRECT3DTEXTURE9&#91;textures.size&#40;&#41;&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; g_dwNumTextures = &#40;DWORD&#41;textures.size&#40;&#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Load each texture<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD index = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; std::vector&lt;std&gt;::iterator i = textures.begin&#40;&#41;; i != textures.end&#40;&#41;; ++i, ++index &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; D3DXCreateTextureFromFile&#40; g_pd3dDevice, i-&gt;c_str&#40;&#41;, &amp;g_pMeshTextures&#91;index&#93; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &#125;<br /><br /><br />/*<br />&nbsp; &nbsp; // Generate the mesh vertex structure<br />&nbsp; &nbsp; if&#40; FAILED&#40; D3DXCreateMeshFVF&#40; quads * 2, vertices, 0, D3DFVF_MESHVERTEX, g_pd3dDevice, &amp;g_pMesh &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; return E_FAIL;<br /><br />&nbsp; &nbsp; // Lock the buffers<br />&nbsp; &nbsp; MeshVertex* pMeshVertices = NULL;<br />&nbsp; &nbsp; WORD* pMeshIndices = NULL;<br />&nbsp; &nbsp; if&#40; SUCCEEDED&#40; g_pMesh-&gt;LockVertexBuffer&#40; 0, &#40;VOID**&#41;&amp;pMeshVertices &#41; &#41; &amp;&amp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUCCEEDED&#40; g_pMesh-&gt;LockIndexBuffer&#40; 0, &#40;VOID**&#41;&amp;pMeshIndices &#41; &#41; &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; // Build the vertices<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD v = 0; v &lt;vertices&gt; maxRadiusSq &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maxRadiusSq = radiusSq;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices&#91;v&#93;.color = pVertices&#91;v&#93;.color;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices&#91;v&#93;.u = 0.0f;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices&#91;v&#93;.v = 0.0f;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; WORD* p = pMeshIndices;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Build the indices<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt;quads&gt;UnlockIndexBuffer&#40;&#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; g_pMesh-&gt;UnlockVertexBuffer&#40;&#41;;<br />&nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; return E_FAIL;<br />*/<br /><br />&nbsp; &nbsp; // Generate the mesh vertex structure<br />&nbsp; &nbsp; if&#40; FAILED&#40; D3DXCreateMeshFVF&#40; quads * 2, quads * 4, 0, D3DFVF_MESHVERTEX, g_pd3dDevice, &amp;g_pMesh &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; return E_FAIL;<br /><br />&nbsp; &nbsp; // Lock the buffers<br />&nbsp; &nbsp; MeshVertex* pMeshVertices = NULL;<br />&nbsp; &nbsp; WORD* pMeshIndices = NULL;<br />&nbsp; &nbsp; if&#40; SUCCEEDED&#40; g_pMesh-&gt;LockVertexBuffer&#40; 0, &#40;VOID**&#41;&amp;pMeshVertices &#41; &#41; &amp;&amp;<br />&nbsp; &nbsp; &nbsp; &nbsp; SUCCEEDED&#40; g_pMesh-&gt;LockIndexBuffer&#40; 0, &#40;VOID**&#41;&amp;pMeshIndices &#41; &#41; &#41;<br />&nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD currentVertexIndex = 0;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; MeshVertex* pMeshVerticesStart = pMeshVertices;<br />&nbsp; &nbsp; &nbsp; &nbsp; WORD* pMeshIndicesStart = pMeshIndices;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Build the vertices<br />&nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt; quads; ++q &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD startIndex = currentVertexIndex;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Repeat for each vertex in the quad<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD v = 0; v &lt;4&gt;x = pVertex-&gt;x;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices-&gt;y = pVertex-&gt;y;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices-&gt;z = pVertex-&gt;z;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Keep track of the radius of the model &#40;assuming origin-centric&#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FLOAT radiusSq = pMeshVertices-&gt;x * pMeshVertices-&gt;x + pMeshVertices-&gt;y * pMeshVertices-&gt;y + pMeshVertices-&gt;z * pMeshVertices-&gt;z;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; radiusSq &gt; maxRadiusSq &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; maxRadiusSq = radiusSq;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices-&gt;color = 0xFFFFFFFF;//pVertex-&gt;color;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices-&gt;u = pQuads&#91;q&#93;.texcoords&#91;v*2+0&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices-&gt;v = pQuads&#91;q&#93;.texcoords&#91;v*2+1&#93;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentVertexIndex++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshVertices++;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;0&#93; = startIndex + 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;1&#93; = startIndex + 1;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;2&#93; = startIndex + 2;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;3&#93; = startIndex + 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;4&#93; = startIndex + 2;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices&#91;5&#93; = startIndex + 3;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshIndices += 6;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Save this file as a .X mesh using a fake material<br />&nbsp; &nbsp; &nbsp; &nbsp; D3DXMATERIAL mtrl;<br />&nbsp; &nbsp; &nbsp; &nbsp; ZeroMemory&#40; &amp;mtrl, sizeof&#40;mtrl&#41; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; if&#40; FAILED&#40; D3DXSaveMeshToX&#40; pFileNameX, g_pMesh, NULL, &amp;mtrl, NULL, 1, D3DXF_FILEFORMAT_TEXT &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output&#40; &quot;NOTE:&nbsp; Unable to save mesh&quot; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD* pMeshAttr = NULL;<br />&nbsp; &nbsp; &nbsp; &nbsp; if&#40; SUCCEEDED&#40; g_pMesh-&gt;LockAttributeBuffer&#40; 0, &amp;pMeshAttr &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DWORD* pMeshAttrStart = pMeshAttr;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Assign mesh attributes based on data from the quad info<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt; quads; ++q &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Weeee<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshAttr&#91;0&#93; = pQuads&#91;q&#93;.tail&#91;0&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshAttr&#91;1&#93; = pQuads&#91;q&#93;.tail&#91;0&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pMeshAttr+=2;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Woot! Bone Matrices!<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //D3DXMATRIXA16 bones&#91;50&#93;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //for&#40; int i = 0; i &lt; 50; ++i &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; //&nbsp; &nbsp; D3DXMatrixIdentity&#40; &amp;bones&#91;i&#93; &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Go through and find quads with the last tail component set to 128<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // With these, look in the vertices they reference for transformation coordinates<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Find attributes &#40;bones&#41; with the same last-value as those vertices and transform them accordingly<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; false &#41; // this only works for the chicken, because it has no recursion and is SLOPPY<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; for&#40; DWORD q = 0; q &lt;quads&gt; 1 &#41; g_CurrentSubset--; else &#123; if&#40; g_CurrentSubset == 0 &#41; g_bShowAll = true; else g_CurrentSubset = 0; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; wParam == 'q' &#41; if&#40; g_CurrentTexture &gt; 1 &#41; g_CurrentTexture--; else g_CurrentTexture = 0;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; wParam == 'e' &#41; if&#40; g_CurrentTexture + 1 &lt;g_dwNumTextures&gt;GetDeviceCaps&#40; &amp;caps &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; DWORD v = caps.MaxVertexShaderConst;<br />&nbsp; &nbsp; &nbsp; &nbsp; v = v;<br /><br /><br />&nbsp; &nbsp; &nbsp; &nbsp; FLOAT modelRadius = 0.0f;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; // Create the scene geometry<br />&nbsp; &nbsp; &nbsp; &nbsp; if&#40; SUCCEEDED&#40; InitGeometry&#40; pFileNameX, vertices, pVertices, quads, pQuads, &amp;modelRadius &#41; &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Show the window<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ShowWindow&#40; hWnd, SW_SHOWDEFAULT &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; UpdateWindow&#40; hWnd &#41;;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // Enter the message loop<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; MSG msg; <br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ZeroMemory&#40; &amp;msg, sizeof&#40;msg&#41; &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; while&#40; msg.message!=WM_QUIT &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if&#40; PeekMessage&#40; &amp;msg, NULL, 0U, 0U, PM_REMOVE &#41; &#41;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#123;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; TranslateMessage&#40; &amp;msg &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DispatchMessage&#40; &amp;msg &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; else<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Render&#40; modelRadius &#41;;<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &#125;<br />&nbsp; &nbsp; &nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; &nbsp; &nbsp; Cleanup&#40;&#41;;<br />&nbsp; &nbsp; &#125;<br /><br />&nbsp; &nbsp; UnregisterClass&#40; &quot;D3D Tutorial&quot;, wc.hInstance &#41;;<br />&#125;</code></dd></dl></div>

			
		</div>

					<dl class="postprofile" id="profile2714">
			<dt>
				<a><img src="./images/avatars/gallery/black_white_1/yingyang_avat.gif" width="87" height="88" alt="User avatar" /></a><br />
				<a>Karl G.</a>			</dt>

			<dd>Lesser Spirit</dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2453</dd><dd><strong>Joined:</strong> Sat Mar 04, 2006 10:26 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p2716" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p2716"></a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2716&amp;sid=65573d350e171b908b90f1864d554f9e#p2716"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Xodus</a></strong> &raquo; Mon Apr 02, 2007 4:34 pm </p>

			
			<div class="content">That's good stuff. I just have to crack open my book so I can understand it hehe. <img src="./images/smilies/icon_smile.gif" alt=":)" title="Smile" />
<br />
<br />Thanks and keep up the good work.</div>

			
		</div>

					<dl class="postprofile" id="profile2716">
			<dt>
				<a>Xodus</a>			</dt>

			<dd>Villager<br /><img src="./images/ranks/rank_0.gif" alt="Villager" title="Villager" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd><dd><strong>Joined:</strong> Thu Dec 21, 2006 11:26 pm</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p2718" class="post bg2">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p2718"></a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2718&amp;sid=65573d350e171b908b90f1864d554f9e#p2718"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Karl G.</a></strong> &raquo; Mon Apr 02, 2007 4:37 pm </p>

			
			<div class="content">No problem.  If you send me an email (<!-- e --><a href="mailto:karlgluck@gmail.com">karlgluck@gmail.com</a><!-- e -->) I can zip up the working project and email it to you.
<br />
<br />Karl</div>

			
		</div>

					<dl class="postprofile" id="profile2718">
			<dt>
				<a><img src="./images/avatars/gallery/black_white_1/yingyang_avat.gif" width="87" height="88" alt="User avatar" /></a><br />
				<a>Karl G.</a>			</dt>

			<dd>Lesser Spirit</dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 2453</dd><dd><strong>Joined:</strong> Sat Mar 04, 2006 10:26 am</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<div id="p2719" class="post bg1">
		<div class="inner"><span class="corners-top"><span></span></span>

		<div class="postbody">
			
			<h3 ><a href="#p2719"></a></h3>
			<p class="author"><a href="http://unseenstudios.com/community/viewtopic.php?p=2719&amp;sid=65573d350e171b908b90f1864d554f9e#p2719"><img src="./styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" /></a>by <strong><a>Xodus</a></strong> &raquo; Mon Apr 02, 2007 4:48 pm </p>

			
			<div class="content">Sent.</div>

			
		</div>

					<dl class="postprofile" id="profile2719">
			<dt>
				<a>Xodus</a>			</dt>

			<dd>Villager<br /><img src="./images/ranks/rank_0.gif" alt="Villager" title="Villager" /></dd>
		<dd>&nbsp;</dd>

		<dd><strong>Posts:</strong> 6</dd><dd><strong>Joined:</strong> Thu Dec 21, 2006 11:26 pm</dd>			<dd>
				<ul class="profile-icons">
					<li class="pm-icon"><a title="Private message"><span>Private message</span></a></li>				</ul>
			</dd>
		
		</dl>
	
		<div class="back2top"><a href="#wrap" class="top" title="Top">Top</a></div>

		<span class="corners-bottom"><span></span></span></div>
	</div>

	<hr class="divider" />
	<form id="viewtopic" method="post" action="http://unseenstudios.com/community/viewtopic.php?f=9&amp;t=522&amp;start=0&amp;sid=65573d350e171b908b90f1864d554f9e">

	<fieldset class="display-options" style="margin-top: 0; ">
				<label>Display posts from previous: <select name="st" id="st"><option value="0" selected="selected">All posts</option><option value="1">1 day</option><option value="7">7 days</option><option value="14">2 weeks</option><option value="30">1 month</option><option value="90">3 months</option><option value="180">6 months</option><option value="365">1 year</option></select></label>
		<label>Sort by <select name="sk" id="sk"><option value="a">Author</option><option value="t" selected="selected">Post time</option><option value="s">Subject</option></select></label> <label><select name="sd" id="sd"><option value="a" selected="selected">Ascending</option><option value="d">Descending</option></select> <input type="submit" name="sort" value="Go" class="button2" /></label>
			</fieldset>

	</form>
	<hr />

<div class="topic-actions">
	<div class="buttons">
			<div class="reply-icon"><a title="Post a reply"><span></span>Post a reply</a></div>
		</div>

			<div class="pagination">
			6 posts			 &bull; Page <strong>1</strong> of <strong>1</strong>		</div>
	</div>

	<p></p><p><a href="viewforum91ec.html" class="left-box left" accesskey="r">Return to Volucris</a></p>
	<br /><br />
	<h3><a href="http://unseenstudios.com/community/viewonline.php?sid=65573d350e171b908b90f1864d554f9e">Who is online</a></h3>
	<p>Users browsing this forum: No registered users and 1 guest</p>
</div>

<div id="page-footer">

	<div class="navbar">
		<div class="inner"><span class="corners-top"><span></span></span>

		<ul class="linklist">
			<li class="icon-home"><a href="index.html" accesskey="h">Board index</a></li>
							<li class="rightside"><a>The team</a> &bull; <a>Delete all board cookies</a> &bull; All times are UTC - 6 hours </li>
		</ul>

		<span class="corners-bottom"><span></span></span></div>
	</div>
	
<!--
	We request you retain the full copyright notice below including the link to www.phpbb.com.
	This not only gives respect to the large amount of time given freely by the developers
	but also helps build interest, traffic and use of phpBB3. If you (honestly) cannot retain
	the full copyright we ask you at least leave in place the "Powered by phpBB" line, with
	"phpBB" linked to www.phpbb.com. If you refuse to include even this then support on our
	forums may be affected.

	The phpBB Group : 2006
//-->

	<div class="copyright">Powered by <a href="http://www.phpbb.com/">phpBB</a> &copy; 2000, 2002, 2005, 2007 phpBB Group
			</div>
</div>

</div>

<div>
	<a id="bottom" name="bottom" accesskey="z"></a>


</body>

<!-- Mirrored from unseenstudios.com/community/viewtopic.php?p=2714&sid=65573d350e171b908b90f1864d554f9e by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 12 Oct 2015 00:44:15 GMT -->
</html>